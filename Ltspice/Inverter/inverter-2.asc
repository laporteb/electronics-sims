Version 4
SHEET 1 3092 2340
WIRE 880 352 688 352
WIRE 1072 352 880 352
WIRE 1232 352 1072 352
WIRE 1472 352 1232 352
WIRE 1792 352 1792 288
WIRE 1792 352 1472 352
WIRE 2112 352 1792 352
WIRE 1472 384 1472 352
WIRE 1584 384 1472 384
WIRE 1792 384 1792 352
WIRE 1904 384 1792 384
WIRE 2112 384 2112 352
WIRE 2192 384 2112 384
WIRE 688 400 688 352
WIRE 880 400 880 352
WIRE 1072 400 1072 352
WIRE 1472 400 1472 384
WIRE 1792 400 1792 384
WIRE 2112 400 2112 384
WIRE 1424 416 1392 416
WIRE 1584 416 1584 384
WIRE 1744 416 1712 416
WIRE 1904 416 1904 384
WIRE 2064 416 2032 416
WIRE 2192 416 2192 384
WIRE 256 496 96 496
WIRE 480 496 336 496
WIRE 688 496 688 464
WIRE 688 496 480 496
WIRE 1232 496 1232 352
WIRE 1472 496 1472 480
WIRE 1584 496 1584 480
WIRE 1584 496 1472 496
WIRE 1792 512 1792 480
WIRE 1904 512 1904 480
WIRE 1904 512 1792 512
WIRE 2112 512 2112 480
WIRE 2192 512 2192 480
WIRE 2192 512 2112 512
WIRE 1472 544 1472 496
WIRE 2240 544 1472 544
WIRE 2320 544 2240 544
WIRE 2512 544 2400 544
WIRE 2688 544 2592 544
WIRE 2800 544 2768 544
WIRE 96 624 96 496
WIRE 256 624 96 624
WIRE 480 624 336 624
WIRE 880 624 880 464
WIRE 880 624 480 624
WIRE 1792 640 1792 512
WIRE 2240 640 1792 640
WIRE 2320 640 2240 640
WIRE 2512 640 2400 640
WIRE 2688 640 2592 640
WIRE 2800 640 2800 544
WIRE 2800 640 2768 640
WIRE 2992 640 2800 640
WIRE 96 656 96 624
WIRE 96 656 32 656
WIRE 1232 672 1232 560
WIRE 2992 672 2992 640
WIRE 32 704 32 656
WIRE 1232 752 1232 672
WIRE 2112 752 2112 512
WIRE 2240 752 2112 752
WIRE 2320 752 2240 752
WIRE 2512 752 2400 752
WIRE 2688 752 2592 752
WIRE 2800 752 2800 640
WIRE 2800 752 2768 752
WIRE 96 768 96 656
WIRE 256 768 96 768
WIRE 480 768 336 768
WIRE 1072 768 1072 464
WIRE 1072 768 480 768
WIRE 1472 800 1472 544
WIRE 1584 800 1472 800
WIRE 1792 800 1792 640
WIRE 1904 800 1792 800
WIRE 2112 800 2112 752
WIRE 2224 800 2112 800
WIRE 1472 816 1472 800
WIRE 1792 816 1792 800
WIRE 2112 816 2112 800
WIRE 688 832 688 496
WIRE 880 832 880 624
WIRE 1072 832 1072 768
WIRE 1424 832 1392 832
WIRE 1584 832 1584 800
WIRE 1744 832 1712 832
WIRE 1904 832 1904 800
WIRE 2064 832 2032 832
WIRE 2224 848 2224 800
WIRE 1472 928 1472 896
WIRE 1584 928 1584 896
WIRE 1584 928 1472 928
WIRE 1792 928 1792 896
WIRE 1904 928 1904 896
WIRE 1904 928 1792 928
WIRE 2112 928 2112 896
WIRE 2224 928 2224 912
WIRE 2224 928 2112 928
WIRE 688 960 688 896
WIRE 880 960 880 896
WIRE 880 960 688 960
WIRE 1072 960 1072 896
WIRE 1072 960 880 960
WIRE 1232 960 1232 816
WIRE 1232 960 1072 960
WIRE 1472 960 1472 928
WIRE 1472 960 1232 960
WIRE 1792 960 1792 928
WIRE 1792 960 1472 960
WIRE 2112 960 2112 928
WIRE 2112 960 1792 960
WIRE 1792 1024 1792 960
WIRE 1152 1168 992 1168
WIRE 992 1216 992 1168
WIRE 80 1232 80 1184
WIRE 1152 1360 992 1360
WIRE 992 1408 992 1360
WIRE 80 1472 80 1440
WIRE 1152 1568 992 1568
WIRE 992 1616 992 1568
WIRE 80 1712 80 1680
WIRE 1152 1760 992 1760
WIRE 992 1808 992 1760
WIRE 80 1952 80 1920
WIRE 1152 1952 992 1952
WIRE 992 2000 992 1952
WIRE 1152 2144 992 2144
WIRE 992 2192 992 2144
FLAG 32 704 0
FLAG 480 496 R
FLAG 480 624 S
FLAG 480 768 T
FLAG 1232 352 VBus+
FLAG 1232 672 V0
FLAG 1232 960 Vbus-
FLAG 80 1312 0
FLAG 80 1184 tri
FLAG 80 1552 0
FLAG 80 1792 0
FLAG 80 2032 0
FLAG 80 1440 MotorU
FLAG 80 1680 MotorV
FLAG 80 1920 MotorW
FLAG 992 1488 0
FLAG 992 1296 0
FLAG 1152 1360 GateS2
IOPIN 1152 1360 Out
FLAG 1152 1168 GateS1
IOPIN 1152 1168 Out
FLAG 992 1888 0
FLAG 992 1696 0
FLAG 1152 1760 GateS4
IOPIN 1152 1760 Out
FLAG 1152 1568 GateS3
IOPIN 1152 1568 Out
FLAG 992 2272 0
FLAG 992 2080 0
FLAG 1152 2144 GateS6
IOPIN 1152 2144 Out
FLAG 1152 1952 GateS5
IOPIN 1152 1952 Out
FLAG 1424 464 0
FLAG 1744 464 0
FLAG 2064 464 0
FLAG 2064 880 0
FLAG 1744 880 0
FLAG 1424 880 0
FLAG 1392 416 GateS1
FLAG 1392 832 GateS2
FLAG 1712 416 GateS3
FLAG 1712 832 GateS4
FLAG 2032 416 GateS5
FLAG 2032 832 GateS6
FLAG 2240 544 U
FLAG 2240 640 V
FLAG 2240 752 W
FLAG 1792 208 0
FLAG 1792 1104 0
FLAG 2992 752 0
SYMBOL voltage 352 496 R90
WINDOW 0 -32 56 VBottom 2
WINDOW 3 32 56 VTop 2
WINDOW 123 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value SINE(0 377 60 0 0 0)
SYMATTR SpiceLine Rser=1m
SYMBOL voltage 352 624 R90
WINDOW 0 -32 56 VBottom 2
WINDOW 3 32 56 VTop 2
WINDOW 123 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value SINE(0 377 60 0 0 120)
SYMATTR SpiceLine Rser=1m
SYMBOL voltage 352 768 R90
WINDOW 0 -32 56 VBottom 2
WINDOW 3 32 56 VTop 2
WINDOW 123 0 0 Left 0
WINDOW 39 60 56 VTop 2
SYMATTR InstName V3
SYMATTR Value SINE(0 377 60 0 0 -120)
SYMATTR SpiceLine Rser=1m
SYMBOL diode 704 464 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D1
SYMATTR Value VS-E5PH7506
SYMBOL diode 704 896 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D2
SYMATTR Value VS-E5PH7506
SYMBOL diode 896 464 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D3
SYMATTR Value VS-E5PH7506
SYMBOL diode 896 896 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D4
SYMATTR Value VS-E5PH7506
SYMBOL diode 1088 464 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D5
SYMATTR Value VS-E5PH7506
SYMBOL diode 1088 896 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D6
SYMATTR Value VS-E5PH7506
SYMBOL voltage 80 1216 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V4
SYMATTR Value PULSE(0 1 0 { 1/ (f_carrier*2) } { 1/ (f_carrier*2) } 0 {1/f_carrier}
SYMBOL voltage 80 1456 R0
WINDOW 0 -32 56 VBottom 2
WINDOW 3 268 70 Top 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V5
SYMATTR Value SINE(0.5 {Amod/2} {f_motor} 0 0 0)
SYMBOL voltage 80 1696 R0
WINDOW 0 -32 56 VBottom 2
WINDOW 3 281 62 Top 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V6
SYMATTR Value SINE(0.5 {Amod/2} {f_motor} 0 0 120)
SYMBOL voltage 80 1936 R0
WINDOW 0 -32 56 VBottom 2
WINDOW 3 271 74 Top 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V7
SYMATTR Value SINE(0.5 {Amod/2} {f_motor} 0 0 -120)
SYMBOL bv 992 1200 R0
SYMATTR InstName B1
SYMATTR Value V=if(V(MotorU)>=V(TRI), 0, 1)
SYMBOL bv 992 1392 R0
SYMATTR InstName B2
SYMATTR Value V=if(V(MotorU)<V(TRI), 0, 1)
SYMBOL bv 992 1600 R0
SYMATTR InstName B3
SYMATTR Value V=if(V(MotorV)>=V(TRI), 0, 1)
SYMBOL bv 992 1792 R0
SYMATTR InstName B4
SYMATTR Value V=if(V(MotorV)<V(TRI), 0, 1)
SYMBOL bv 992 1984 R0
SYMATTR InstName B5
SYMATTR Value V=if(V(MotorW)>=V(TRI), 0, 1)
SYMBOL bv 992 2176 R0
SYMATTR InstName B6
SYMATTR Value V=if(V(MotorW)<V(TRI), 0, 1)
SYMBOL sw 1472 496 M180
SYMATTR InstName S1
SYMBOL sw 1472 912 M180
SYMATTR InstName S2
SYMBOL sw 1792 496 M180
SYMATTR InstName S3
SYMBOL sw 1792 912 M180
SYMATTR InstName S4
SYMBOL sw 2112 496 M180
SYMATTR InstName S5
SYMBOL sw 2112 912 M180
SYMATTR InstName S6
SYMBOL res 2416 528 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value {motor_R}
SYMBOL res 2416 624 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value {motor_R}
SYMBOL res 2416 736 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value {motor_R}
SYMBOL ind 2496 560 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L1
SYMATTR Value {motor_L}
SYMBOL ind 2496 656 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L2
SYMATTR Value {motor_L}
SYMBOL ind 2496 768 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L3
SYMATTR Value {motor_L}
SYMBOL voltage 2672 544 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 -292 163 VBottom 2
WINDOW 123 0 0 Left 0
SYMATTR InstName V8
SYMATTR Value SINE(0 {motor_V} {f_motor} 0 0 0)
SYMATTR SpiceLine Rser=1m
SYMBOL voltage 2672 640 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 -32 56 Invisible 2
WINDOW 123 0 0 Left 0
SYMATTR InstName V9
SYMATTR Value SINE(0 {motor_V} {f_motor} 0 0 120)
SYMATTR SpiceLine Rser=1m
SYMBOL voltage 2672 752 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 -32 56 Invisible 2
WINDOW 123 0 0 Left 0
SYMATTR InstName V10
SYMATTR Value SINE(0 {motor_V} {f_motor} 0 0 -120)
SYMATTR SpiceLine Rser=1m
SYMBOL diode 1600 480 R180
WINDOW 0 24 64 Left 2
WINDOW 3 -72 369 Left 2
SYMATTR InstName D7
SYMATTR Value VS-E5PH7506
SYMBOL diode 1600 896 R180
WINDOW 0 24 64 Left 2
WINDOW 3 -71 755 Left 2
SYMATTR InstName D8
SYMATTR Value VS-E5PH7506
SYMBOL diode 1920 896 R180
WINDOW 0 24 64 Left 2
WINDOW 3 -71 755 Left 2
SYMATTR InstName D9
SYMATTR Value VS-E5PH7506
SYMBOL diode 1920 480 R180
WINDOW 0 -43 1 Left 2
WINDOW 3 -67 370 Left 2
SYMATTR InstName D10
SYMATTR Value VS-E5PH7506
SYMBOL diode 2208 480 R180
WINDOW 0 -43 1 Left 2
WINDOW 3 -69 366 Left 2
SYMATTR InstName D11
SYMATTR Value VS-E5PH7506
SYMBOL diode 2240 912 R180
WINDOW 0 24 64 Left 2
WINDOW 3 -45 772 Left 2
SYMATTR InstName D12
SYMATTR Value VS-E5PH7506
SYMBOL cap 1216 496 R0
SYMATTR InstName C1
SYMATTR Value 500µ
SYMATTR SpiceLine V=400 Irms=60 Rser=.08
SYMBOL cap 1216 752 R0
SYMATTR InstName C2
SYMATTR Value 500µ
SYMATTR SpiceLine V=400 Irms=60 Rser=.08
SYMBOL res 2976 656 R0
SYMATTR InstName R4
SYMATTR Value 10Meg
SYMBOL res 1776 1008 R0
SYMATTR InstName R5
SYMATTR Value 10Meg
SYMBOL res 1776 192 R0
SYMATTR InstName R6
SYMATTR Value 10Meg
TEXT -32 216 Left 2 !.param f_motor=47\n.param f_carrier=10K\n.param Amod=0.9\n.param motor_L=200m\n.param motor_R=500m\n.param motor_V=397
TEXT 248 256 Left 2 !.meas LINE rms (v(R) - v(S) )
TEXT 248 288 Left 2 !.meas DCLINK avg v(VBus+) - v(VBus-)
TEXT -32 1032 Left 4 ;Sine PWM Control Signals
TEXT 1328 304 Left 2 !.model SW SW(Ron=10m Roff=10Meg Vt=0.2)
TEXT 2744 440 Left 2 ;Motor
TEXT 248 320 Left 2 !.meas UVMax max(v(U) -v(V))\n.meas UWMax max(v(U) -v(W))\n.meas VWMax max(v(V) -v(W))
TEXT 1688 1240 Left 2 !.tran 200m uic
TEXT 1960 232 Left 2 ;R4, R5, R6 required for simulation
RECTANGLE Normal 1456 2336 -80 1072 1
RECTANGLE Normal 2832 816 2272 464 2
