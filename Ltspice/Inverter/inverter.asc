Version 4
SHEET 1 3048 2340
WIRE 2032 224 1936 224
WIRE 1936 256 1936 224
WIRE 2032 272 2032 224
WIRE 880 352 688 352
WIRE 1072 352 880 352
WIRE 1232 352 1072 352
WIRE 1472 352 1232 352
WIRE 1792 352 1472 352
WIRE 1936 352 1936 336
WIRE 1936 352 1792 352
WIRE 2112 352 1936 352
WIRE 1472 384 1472 352
WIRE 1584 384 1472 384
WIRE 1792 384 1792 352
WIRE 1904 384 1792 384
WIRE 2112 384 2112 352
WIRE 2192 384 2112 384
WIRE 688 400 688 352
WIRE 880 400 880 352
WIRE 1072 400 1072 352
WIRE 1472 400 1472 384
WIRE 1792 400 1792 384
WIRE 2112 400 2112 384
WIRE 1424 416 1392 416
WIRE 1584 416 1584 384
WIRE 1744 416 1712 416
WIRE 1904 416 1904 384
WIRE 2064 416 2032 416
WIRE 2192 416 2192 384
WIRE 256 496 96 496
WIRE 480 496 336 496
WIRE 688 496 688 464
WIRE 688 496 480 496
WIRE 1232 496 1232 352
WIRE 1472 496 1472 480
WIRE 1584 496 1584 480
WIRE 1584 496 1472 496
WIRE 1792 512 1792 480
WIRE 1904 512 1904 480
WIRE 1904 512 1792 512
WIRE 2112 512 2112 480
WIRE 2192 512 2192 480
WIRE 2192 512 2112 512
WIRE 1472 544 1472 496
WIRE 2240 544 1472 544
WIRE 2320 544 2240 544
WIRE 2512 544 2400 544
WIRE 2688 544 2592 544
WIRE 2800 544 2768 544
WIRE 96 624 96 496
WIRE 256 624 96 624
WIRE 480 624 336 624
WIRE 880 624 880 464
WIRE 880 624 480 624
WIRE 1792 640 1792 512
WIRE 2240 640 1792 640
WIRE 2320 640 2240 640
WIRE 2512 640 2400 640
WIRE 2688 640 2592 640
WIRE 2800 640 2800 544
WIRE 2800 640 2768 640
WIRE 2912 640 2800 640
WIRE 96 656 96 624
WIRE 96 656 32 656
WIRE 1232 672 1232 560
WIRE 2912 672 2912 640
WIRE 32 704 32 656
WIRE 1232 752 1232 672
WIRE 2112 752 2112 512
WIRE 2240 752 2112 752
WIRE 2320 752 2240 752
WIRE 2512 752 2400 752
WIRE 2688 752 2592 752
WIRE 2800 752 2800 640
WIRE 2800 752 2768 752
WIRE 96 768 96 656
WIRE 256 768 96 768
WIRE 480 768 336 768
WIRE 1072 768 1072 464
WIRE 1072 768 480 768
WIRE 2912 784 2912 752
WIRE 1472 800 1472 544
WIRE 1584 800 1472 800
WIRE 1792 800 1792 640
WIRE 1904 800 1792 800
WIRE 2112 800 2112 752
WIRE 2224 800 2112 800
WIRE 1472 816 1472 800
WIRE 1792 816 1792 800
WIRE 2112 816 2112 800
WIRE 688 832 688 496
WIRE 880 832 880 624
WIRE 1072 832 1072 768
WIRE 1424 832 1392 832
WIRE 1584 832 1584 800
WIRE 1744 832 1712 832
WIRE 1904 832 1904 800
WIRE 2064 832 2032 832
WIRE 2224 848 2224 800
WIRE 1472 928 1472 896
WIRE 1584 928 1584 896
WIRE 1584 928 1472 928
WIRE 1792 928 1792 896
WIRE 1904 928 1904 896
WIRE 1904 928 1792 928
WIRE 2112 928 2112 896
WIRE 2224 928 2224 912
WIRE 2224 928 2112 928
WIRE 688 960 688 896
WIRE 880 960 880 896
WIRE 880 960 688 960
WIRE 1072 960 1072 896
WIRE 1072 960 880 960
WIRE 1232 960 1232 816
WIRE 1232 960 1072 960
WIRE 1472 960 1472 928
WIRE 1472 960 1232 960
WIRE 1792 960 1792 928
WIRE 1792 960 1472 960
WIRE 2112 960 2112 928
WIRE 2112 960 1792 960
WIRE 1792 1008 1792 960
WIRE 784 1056 752 1056
WIRE 880 1056 848 1056
WIRE 1120 1104 1040 1104
WIRE 752 1120 752 1056
WIRE 752 1120 688 1120
WIRE 784 1120 752 1120
WIRE 880 1120 880 1056
WIRE 880 1120 864 1120
WIRE 912 1120 880 1120
WIRE 976 1120 912 1120
WIRE 1792 1120 1792 1088
WIRE 624 1136 352 1136
WIRE 912 1136 912 1120
WIRE 720 1152 688 1152
WIRE 352 1200 352 1136
WIRE 784 1248 752 1248
WIRE 880 1248 848 1248
WIRE -208 1264 -208 1216
WIRE 1120 1296 1056 1296
WIRE 720 1312 720 1152
WIRE 752 1312 752 1248
WIRE 752 1312 720 1312
WIRE 784 1312 752 1312
WIRE 880 1312 880 1248
WIRE 880 1312 864 1312
WIRE 912 1312 880 1312
WIRE 992 1312 912 1312
WIRE 912 1328 912 1312
WIRE 816 1472 784 1472
WIRE 912 1472 880 1472
WIRE -208 1504 -208 1472
WIRE 1152 1520 1072 1520
WIRE 784 1536 784 1472
WIRE 784 1536 720 1536
WIRE 816 1536 784 1536
WIRE 912 1536 912 1472
WIRE 912 1536 896 1536
WIRE 944 1536 912 1536
WIRE 1008 1536 944 1536
WIRE 656 1552 352 1552
WIRE 944 1552 944 1536
WIRE 752 1568 720 1568
WIRE 352 1600 352 1552
WIRE 816 1664 784 1664
WIRE 912 1664 880 1664
WIRE 1152 1712 1088 1712
WIRE 752 1728 752 1568
WIRE 784 1728 784 1664
WIRE 784 1728 752 1728
WIRE 816 1728 784 1728
WIRE 912 1728 912 1664
WIRE 912 1728 896 1728
WIRE 944 1728 912 1728
WIRE 1024 1728 944 1728
WIRE -208 1744 -208 1712
WIRE 944 1744 944 1728
WIRE 816 1872 784 1872
WIRE 912 1872 880 1872
WIRE 1152 1920 1072 1920
WIRE 784 1936 784 1872
WIRE 784 1936 720 1936
WIRE 816 1936 784 1936
WIRE 912 1936 912 1872
WIRE 912 1936 896 1936
WIRE 944 1936 912 1936
WIRE 1008 1936 944 1936
WIRE 656 1952 352 1952
WIRE 944 1952 944 1936
WIRE 752 1968 720 1968
WIRE -208 1984 -208 1952
WIRE 352 1984 352 1952
WIRE 816 2064 784 2064
WIRE 912 2064 880 2064
WIRE 1152 2112 1088 2112
WIRE 752 2128 752 1968
WIRE 784 2128 784 2064
WIRE 784 2128 752 2128
WIRE 816 2128 784 2128
WIRE 912 2128 912 2064
WIRE 912 2128 896 2128
WIRE 944 2128 912 2128
WIRE 1024 2128 944 2128
WIRE 944 2144 944 2128
FLAG 32 704 0
FLAG 480 496 R
FLAG 480 624 S
FLAG 480 768 T
FLAG 1232 352 VBus+
FLAG 1232 672 V0
FLAG 1232 960 Vbus-
FLAG 1424 464 0
FLAG 1744 464 0
FLAG 2064 464 0
FLAG 2064 880 0
FLAG 1744 880 0
FLAG 1424 880 0
FLAG 1392 416 GateS1
FLAG 1392 832 GateS2
FLAG 1712 416 GateS3
FLAG 1712 832 GateS4
FLAG 2032 416 GateS5
FLAG 2032 832 GateS6
FLAG 2240 544 U
FLAG 2240 640 V
FLAG 2240 752 W
FLAG 1792 1120 0
FLAG 2032 272 0
FLAG 2912 784 0
FLAG -208 1344 0
FLAG -208 1216 tri
FLAG -208 1584 0
FLAG -208 1824 0
FLAG -208 2064 0
FLAG -208 1472 MotorU
FLAG -208 1712 MotorV
FLAG -208 1952 MotorW
FLAG 352 1280 0
FLAG 352 1680 0
FLAG 352 2064 0
FLAG 912 1200 0
FLAG 912 1392 0
FLAG 1120 1104 GateS1
FLAG 1120 1296 GateS2
FLAG 944 1616 0
FLAG 944 1808 0
FLAG 1152 1520 GateS3
FLAG 1152 1712 GateS4
FLAG 944 2016 0
FLAG 944 2208 0
FLAG 1152 1920 GateS5
FLAG 1152 2112 GateS6
SYMBOL voltage 352 496 R90
WINDOW 0 -32 56 VBottom 2
WINDOW 3 32 56 VTop 2
WINDOW 123 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value SINE(0 377 60 0 0 0)
SYMATTR SpiceLine Rser=1m
SYMBOL voltage 352 624 R90
WINDOW 0 -32 56 VBottom 2
WINDOW 3 32 56 VTop 2
WINDOW 123 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value SINE(0 377 60 0 0 120)
SYMATTR SpiceLine Rser=1m
SYMBOL voltage 352 768 R90
WINDOW 0 -32 56 VBottom 2
WINDOW 3 32 56 VTop 2
WINDOW 123 0 0 Left 0
WINDOW 39 60 56 VTop 2
SYMATTR InstName V3
SYMATTR Value SINE(0 377 60 0 0 -120)
SYMATTR SpiceLine Rser=1m
SYMBOL sw 1472 496 M180
SYMATTR InstName S1
SYMBOL sw 1472 912 M180
SYMATTR InstName S2
SYMBOL sw 1792 496 M180
SYMATTR InstName S3
SYMBOL sw 1792 912 M180
SYMATTR InstName S4
SYMBOL sw 2112 496 M180
SYMATTR InstName S5
SYMBOL sw 2112 912 M180
SYMATTR InstName S6
SYMBOL res 2304 560 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R1
SYMATTR Value {motor_R}
SYMBOL res 2304 656 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R2
SYMATTR Value {motor_R}
SYMBOL res 2304 768 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R3
SYMATTR Value {motor_R}
SYMBOL ind 2496 560 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L1
SYMATTR Value {motor_L}
SYMBOL ind 2496 656 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L2
SYMATTR Value {motor_L}
SYMBOL ind 2496 768 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L3
SYMATTR Value {motor_L}
SYMBOL voltage 2672 544 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 -292 163 VBottom 2
WINDOW 123 0 0 Left 0
SYMATTR InstName V8
SYMATTR Value SINE(0 {motor_V} {f_motor} 0 0 0)
SYMATTR SpiceLine Rser=1m
SYMBOL voltage 2672 640 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 -32 56 Invisible 2
WINDOW 123 0 0 Left 0
SYMATTR InstName V9
SYMATTR Value SINE(0 {motor_V} {f_motor} 0 0 120)
SYMATTR SpiceLine Rser=1m
SYMBOL voltage 2672 752 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 -32 56 Invisible 2
WINDOW 123 0 0 Left 0
SYMATTR InstName V10
SYMATTR Value SINE(0 {motor_V} {f_motor} 0 0 -120)
SYMATTR SpiceLine Rser=1m
SYMBOL cap 1216 496 R0
SYMATTR InstName C1
SYMATTR Value 500µ
SYMATTR SpiceLine V=400 Irms=60 Rser=.08
SYMBOL cap 1216 752 R0
SYMATTR InstName C2
SYMATTR Value 500µ
SYMATTR SpiceLine V=400 Irms=60 Rser=.08
SYMBOL res 1776 992 R0
SYMATTR InstName R4
SYMATTR Value 10Meg
SYMBOL res 2896 656 R0
SYMATTR InstName R5
SYMATTR Value 10Meg
SYMBOL res 1920 240 R0
SYMATTR InstName R6
SYMATTR Value 10Meg
SYMBOL diode 704 464 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D1
SYMBOL diode 896 464 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D3
SYMBOL diode 1088 464 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D5
SYMBOL diode 704 896 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D2
SYMBOL diode 896 896 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D4
SYMBOL diode 1088 896 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D6
SYMBOL diode 1600 480 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D7
SYMBOL diode 1920 480 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D10
SYMBOL diode 2208 480 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D11
SYMBOL diode 1600 896 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D8
SYMBOL diode 1920 896 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D9
SYMBOL diode 2240 912 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D12
SYMBOL voltage -208 1248 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V11
SYMATTR Value PULSE(0 1 0 { 1/ (f_carrier*2) } { 1/ (f_carrier*2) } 0 {1/f_carrier}
SYMBOL voltage -208 1488 R0
WINDOW 0 -32 56 VBottom 2
WINDOW 3 268 70 Top 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V12
SYMATTR Value SINE(0.5 {Amod/2} {f_motor} 0 0 0)
SYMBOL voltage -208 1728 R0
WINDOW 0 -32 56 VBottom 2
WINDOW 3 281 62 Top 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V13
SYMATTR Value SINE(0.5 {Amod/2} {f_motor} 0 0 120)
SYMBOL voltage -208 1968 R0
WINDOW 0 -32 56 VBottom 2
WINDOW 3 271 74 Top 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V14
SYMATTR Value SINE(0.5 {Amod/2} {f_motor} 0 0 -120)
SYMBOL bv 352 1184 R0
SYMATTR InstName B7
SYMATTR Value V=if(V(MotorU)>=V(TRI), 0, 5)
SYMBOL bv 352 1584 R0
SYMATTR InstName B8
SYMATTR Value V=if(V(MotorV)>=V(TRI), 0, 5)
SYMBOL bv 352 1968 R0
SYMATTR InstName B9
SYMATTR Value V=if(V(MotorW)>=V(TRI), 0, 5)
SYMBOL Digital\\buf 624 1072 R0
WINDOW 3 -15 -6 Left 2
SYMATTR Value VHIGH=5
SYMATTR InstName A1
SYMBOL res 880 1104 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value 100
SYMBOL diode 848 1040 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 -18 -3 VTop 2
SYMATTR InstName D13
SYMBOL cap 896 1136 R0
SYMATTR InstName C3
SYMATTR Value 100p
SYMBOL Digital\\buf 976 1056 R0
WINDOW 3 -15 -6 Left 2
SYMATTR Value VHIGH=5
SYMATTR InstName A2
SYMBOL Digital\\buf 992 1248 R0
WINDOW 3 -15 -6 Left 2
SYMATTR Value VHIGH=5
SYMATTR InstName A3
SYMBOL res 880 1296 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R9
SYMATTR Value 100
SYMBOL diode 848 1232 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 -18 -3 VTop 2
SYMATTR InstName D14
SYMBOL cap 896 1328 R0
SYMATTR InstName C4
SYMATTR Value 100p
SYMBOL Digital\\buf 656 1488 R0
WINDOW 3 -15 -6 Left 2
SYMATTR Value VHIGH=5
SYMATTR InstName A4
SYMBOL res 912 1520 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R10
SYMATTR Value 100
SYMBOL diode 880 1456 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 -18 -3 VTop 2
SYMATTR InstName D15
SYMBOL cap 928 1552 R0
SYMATTR InstName C5
SYMATTR Value 100p
SYMBOL Digital\\buf 1008 1472 R0
WINDOW 3 -15 -6 Left 2
SYMATTR Value VHIGH=5
SYMATTR InstName A5
SYMBOL Digital\\buf 1024 1664 R0
WINDOW 3 -15 -6 Left 2
SYMATTR Value VHIGH=5
SYMATTR InstName A6
SYMBOL res 912 1712 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R11
SYMATTR Value 100
SYMBOL diode 880 1648 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 -18 -3 VTop 2
SYMATTR InstName D16
SYMBOL cap 928 1744 R0
SYMATTR InstName C6
SYMATTR Value 100p
SYMBOL Digital\\buf 656 1888 R0
WINDOW 3 -15 -6 Left 2
SYMATTR Value VHIGH=5
SYMATTR InstName A7
SYMBOL res 912 1920 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R12
SYMATTR Value 100
SYMBOL diode 880 1856 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 -18 -3 VTop 2
SYMATTR InstName D17
SYMBOL cap 928 1952 R0
SYMATTR InstName C7
SYMATTR Value 100p
SYMBOL Digital\\buf 1008 1872 R0
WINDOW 3 -15 -6 Left 2
SYMATTR Value VHIGH=5
SYMATTR InstName A8
SYMBOL Digital\\buf 1024 2064 R0
WINDOW 3 -15 -6 Left 2
SYMATTR Value VHIGH=5
SYMATTR InstName A9
SYMBOL res 912 2112 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R13
SYMATTR Value 100
SYMBOL diode 880 2048 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 -18 -3 VTop 2
SYMATTR InstName D18
SYMBOL cap 928 2144 R0
SYMATTR InstName C8
SYMATTR Value 100p
TEXT -32 216 Left 2 !.param f_motor=47\n.param f_carrier=10K\n.param Amod=0.9\n.param motor_L=200m\n.param motor_R=500m\n.param motor_V=397
TEXT 704 288 Left 2 !.model SW SW(Ron=10m Roff=10Meg Vt=2.5 vh=-2.5)
TEXT 2744 440 Left 2 ;Motor
TEXT 264 216 Left 2 !.tran 100m uic
TEXT 704 328 Left 2 !.ic v(Vbus+)=360 v(VBus-)=-360
TEXT -288 952 Left 4 ;Sine PWM Control Signals
RECTANGLE Normal 2832 816 2272 464 2
RECTANGLE Normal 1280 2256 -320 992 2
