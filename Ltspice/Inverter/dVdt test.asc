Version 4
SHEET 1 4020 2356
WIRE 1472 304 1088 304
WIRE 1792 304 1792 240
WIRE 1792 304 1472 304
WIRE 432 320 416 320
WIRE 528 320 512 320
WIRE 576 320 528 320
WIRE 1472 320 1472 304
WIRE 1792 320 1792 304
WIRE 416 368 416 320
WIRE -496 384 -496 336
WIRE 1472 416 1472 400
WIRE 1584 416 1472 416
WIRE 1792 416 1792 400
WIRE 1904 416 1792 416
WIRE 1472 432 1472 416
WIRE 1792 432 1792 416
WIRE 1424 448 1392 448
WIRE 1584 448 1584 416
WIRE 1744 448 1712 448
WIRE 1904 448 1904 416
WIRE 1088 480 1088 304
WIRE 432 512 416 512
WIRE 528 512 512 512
WIRE 576 512 528 512
WIRE 1472 528 1472 512
WIRE 1584 528 1584 512
WIRE 1584 528 1472 528
WIRE 1792 544 1792 512
WIRE 1904 544 1904 512
WIRE 1904 544 1792 544
WIRE 416 560 416 512
WIRE 1472 592 1472 528
WIRE 2464 592 1472 592
WIRE 2544 592 2464 592
WIRE 2672 592 2624 592
WIRE 2864 592 2672 592
WIRE 2944 592 2864 592
WIRE 3136 592 3024 592
WIRE 3312 592 3216 592
WIRE 3424 592 3392 592
WIRE 3552 592 3424 592
WIRE 2464 608 2464 592
WIRE 2672 608 2672 592
WIRE -496 624 -496 592
WIRE 1088 656 1088 560
WIRE 1088 656 976 656
WIRE 976 688 976 656
WIRE 1792 688 1792 544
WIRE 2544 688 1792 688
WIRE 2864 688 2624 688
WIRE 3392 688 2864 688
WIRE 3424 688 3424 592
WIRE 3424 688 3392 688
WIRE 2464 704 2464 672
WIRE 2672 704 2672 672
WIRE 432 720 416 720
WIRE 528 720 512 720
WIRE 576 720 528 720
WIRE 3552 720 3552 592
WIRE 1472 736 1472 592
WIRE 1584 736 1472 736
WIRE 1792 736 1792 688
WIRE 1904 736 1792 736
WIRE 1472 752 1472 736
WIRE 1792 752 1792 736
WIRE 416 768 416 720
WIRE 1424 768 1392 768
WIRE 1584 768 1584 736
WIRE 1744 768 1712 768
WIRE 1904 768 1904 736
WIRE 1088 784 1088 656
WIRE 2464 784 2464 768
WIRE 2464 784 2000 784
WIRE 2544 784 2464 784
WIRE 2672 784 2672 768
WIRE 2672 784 2624 784
WIRE 3392 784 3392 752
WIRE 3392 784 2672 784
WIRE 1472 800 1472 752
WIRE 1792 800 1792 752
WIRE 2000 800 2000 784
WIRE -496 864 -496 832
WIRE 1472 864 1472 832
WIRE 1584 864 1584 832
WIRE 1584 864 1472 864
WIRE 1792 864 1792 832
WIRE 1904 864 1904 832
WIRE 1904 864 1792 864
WIRE 432 912 416 912
WIRE 528 912 512 912
WIRE 576 912 528 912
WIRE 1472 928 1472 864
WIRE 1792 928 1792 864
WIRE 416 960 416 912
WIRE 1088 1040 1088 864
WIRE 1472 1040 1472 1008
WIRE 1472 1040 1088 1040
WIRE 1792 1040 1792 1008
WIRE 1792 1040 1472 1040
WIRE 1792 1104 1792 1040
FLAG -496 464 0
FLAG -496 336 tri
FLAG -496 704 0
FLAG -496 944 0
FLAG -496 592 MotorU
FLAG -496 832 MotorV
FLAG 416 640 0
FLAG 416 448 0
FLAG 576 512 GateS2
IOPIN 576 512 Out
FLAG 576 320 GateS1
IOPIN 576 320 Out
FLAG 416 1040 0
FLAG 416 848 0
FLAG 576 912 GateS4
IOPIN 576 912 Out
FLAG 576 720 GateS3
IOPIN 576 720 Out
FLAG 1424 496 0
FLAG 1744 496 0
FLAG 1744 816 0
FLAG 1424 816 0
FLAG 1392 448 GateS1
FLAG 1392 768 GateS2
FLAG 1712 448 GateS3
FLAG 1712 768 GateS4
FLAG 2864 592 U
FLAG 2864 688 V
FLAG 1792 160 0
FLAG 1792 1184 0
FLAG 528 384 0
FLAG 528 976 0
FLAG 528 784 0
FLAG 528 576 0
FLAG 976 688 0
FLAG 3552 800 0
FLAG 2000 800 0
SYMBOL voltage -496 368 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V4
SYMATTR Value PULSE(0 1 0 { 1/ (f_carrier*2) } { 1/ (f_carrier*2) } 0 {1/f_carrier}
SYMBOL voltage -496 608 R0
WINDOW 0 -32 56 VBottom 2
WINDOW 3 268 70 Top 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V5
SYMATTR Value SINE(0.5 {Amod/2} {f_motor} 0 0 180)
SYMBOL voltage -496 848 R0
WINDOW 0 -32 56 VBottom 2
WINDOW 3 281 62 Top 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V6
SYMATTR Value SINE(0.5 {Amod/2} {f_motor} 0 0 0)
SYMBOL bv 416 352 R0
SYMATTR InstName B1
SYMATTR Value V=if(V(MotorU)>=V(TRI), 0, 5)
SYMBOL bv 416 544 R0
SYMATTR InstName B2
SYMATTR Value V=if(V(MotorU)<V(TRI), 0, 5)
SYMBOL bv 416 752 R0
SYMATTR InstName B3
SYMATTR Value V=if(V(MotorV)>=V(TRI), 0, 5)
SYMBOL bv 416 944 R0
SYMATTR InstName B4
SYMATTR Value V=if(V(MotorV)<V(TRI), 0, 5)
SYMBOL sw 1472 528 M180
SYMATTR InstName S1
SYMBOL sw 1472 848 M180
SYMATTR InstName S2
SYMBOL sw 1792 528 M180
SYMATTR InstName S3
SYMBOL sw 1792 848 M180
SYMATTR InstName S4
SYMBOL res 3040 576 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value {motor_R}
SYMBOL ind 3120 608 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L1
SYMATTR Value {motor_L}
SYMBOL voltage 3296 592 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 -292 163 VBottom 2
WINDOW 123 0 0 Left 0
SYMATTR InstName V8
SYMATTR Value SINE(0 {motor_V} {f_motor} 0 0 0)
SYMATTR SpiceLine Rser=1m
SYMBOL diode 1600 512 R180
WINDOW 0 24 64 Left 2
WINDOW 3 -72 369 Left 2
SYMATTR InstName D7
SYMATTR Value VS-E5PH7506
SYMBOL diode 1600 832 R180
WINDOW 0 24 64 Left 2
WINDOW 3 -71 755 Left 2
SYMATTR InstName D8
SYMATTR Value VS-E5PH7506
SYMBOL diode 1920 832 R180
WINDOW 0 24 64 Left 2
WINDOW 3 -71 755 Left 2
SYMATTR InstName D9
SYMATTR Value VS-E5PH7506
SYMBOL diode 1920 512 R180
WINDOW 0 -43 1 Left 2
WINDOW 3 -67 370 Left 2
SYMATTR InstName D10
SYMATTR Value VS-E5PH7506
SYMBOL res 1776 1088 R0
SYMATTR InstName R5
SYMATTR Value 10Meg
SYMBOL res 1776 144 R0
SYMATTR InstName R6
SYMATTR Value 10Meg
SYMBOL cap 512 320 R0
SYMATTR InstName C3
SYMATTR Value 0.1µ
SYMBOL res 528 304 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R7
SYMATTR Value 1
SYMBOL res 528 496 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value 1
SYMBOL res 528 704 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R9
SYMATTR Value 1
SYMBOL res 528 896 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R10
SYMATTR Value 1
SYMBOL cap 512 512 R0
SYMATTR InstName C4
SYMATTR Value 0.1µ
SYMBOL cap 512 720 R0
SYMATTR InstName C5
SYMATTR Value 0.1µ
SYMBOL cap 512 912 R0
SYMATTR InstName C6
SYMATTR Value 0.1µ
SYMBOL voltage 1088 464 R0
WINDOW 123 0 0 Left 0
WINDOW 39 24 124 Left 2
SYMATTR InstName V1
SYMATTR Value 350
SYMATTR SpiceLine Rser=10m
SYMBOL voltage 1088 768 R0
WINDOW 123 0 0 Left 0
WINDOW 39 24 124 Left 2
SYMATTR InstName V2
SYMATTR Value 350
SYMATTR SpiceLine Rser=10m
SYMBOL res 3536 704 R0
SYMATTR InstName R2
SYMATTR Value 10Meg
SYMBOL ind 1456 912 R0
SYMATTR InstName L2
SYMATTR Value 1µ
SYMBOL ind 1776 912 R0
SYMATTR InstName L3
SYMATTR Value 1µ
SYMBOL ind 1456 304 R0
SYMATTR InstName L4
SYMATTR Value 1µ
SYMBOL ind 1776 304 R0
SYMATTR InstName L5
SYMATTR Value 1µ
SYMBOL cap 3376 688 R0
SYMATTR InstName C2
SYMATTR Value 1p
SYMBOL ind 2528 608 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L6
SYMATTR Value 10n
SYMBOL ind 2528 704 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L7
SYMATTR Value 10n
SYMBOL ind 2528 800 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L8
SYMATTR Value 10n
SYMBOL cap 2448 608 R0
SYMATTR InstName C1
SYMATTR Value 10p
SYMBOL cap 2656 608 R0
SYMATTR InstName C7
SYMATTR Value 10p
SYMBOL cap 2448 704 R0
SYMATTR InstName C8
SYMATTR Value 10p
SYMBOL cap 2656 704 R0
SYMATTR InstName C9
SYMATTR Value 10p
TEXT 2968 904 Left 2 !.param f_motor=47\n.param f_carrier=10K\n.param Amod=0.9\n.param motor_L=200m\n.param motor_R=500m\n.param motor_V=397
TEXT -656 184 Left 4 ;Sine PWM Control Signals
TEXT 1040 216 Left 2 !.model SW SW(Ron=10m Roff=10Meg Vt=2.5 Vh=-2)
TEXT 2728 504 Left 2 ;Motor
TEXT 1040 160 Left 2 !.tran 0 10m 5m uic
TEXT 1960 232 Left 2 ;R4, R5, R6 required for simulation
TEXT 3512 552 Left 2 ;C3 is capacitance between rotor and stator.
TEXT 2456 504 Left 2 ;Simple Cable Model
RECTANGLE Normal 880 1184 -688 240 1
RECTANGLE Normal 3456 864 2896 512 2
RECTANGLE Normal 2736 848 2416 528 2
